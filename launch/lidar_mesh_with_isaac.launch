<?xml version="1.0"?>
<launch>
  <!-- Launch file for Hough Transform plane detection with Isaac Sim -->
  <!-- Note: RViz is launched separately by csc647-final-project-start.py -->

  <!-- Arguments -->
  <arg name="scan_topic" default="/hsrb/base_scan" />

  <!-- Set use_sim_time to true for Isaac Sim -->
  <param name="use_sim_time" value="true" />

  <!-- LiDAR Activator Node -->
  <node name="lidar_activator" pkg="csc647-final-project" type="lidar_activator.py" output="screen">
    <param name="scan_topic" value="$(arg scan_topic)" />
    <param name="min_range" value="0.001" />
    <param name="max_range" value="1000.0" />
  </node>

  <!-- Delaunay Mesh Generator (Mesh generation via Delaunay triangulation) -->
  <node name="delaunay_mesh_generator" pkg="csc647-final-project" type="point_cloud_to_mesh.py" output="screen">
    <param name="voxel_size" value="0.2" />
    <param name="max_distance" value="999999.0" />  <!-- Increased from 5.0 to 10.0 meters -->
    <param name="edge_width" value="0.01" />  <!-- ADD THIS -->
    <param name="use_3d_camera" value="true" />
  </node>

  <!-- Hough Transform Processor (Main algorithm for plane detection) -->
  <node name="hough_transform_processor" pkg="csc647-final-project" type="hough_transform_processor.py" output="screen">
    <param name="grid_resolution" value="1" />
    <param name="grid_size" value="1" />  <!-- Increased from 300 to 400 for better coverage -->
    <param name="hough_threshold" value="10" />  <!-- Increased from 30 for better line detection -->
    <param name="min_line_length" value="0.5" />  <!-- Increased from 0.3 for longer lines -->
    <param name="max_line_gap" value="0.5" />
    <param name="max_distance" value="999999.0" />  <!-- Added parameter for distance limit -->
  </node>
</launch>
